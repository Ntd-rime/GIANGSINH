<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Merry Christmas ‚ú®</title>

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        background: black;
        height: 100%;
        overflow: hidden;
        font-family: "Segoe UI", sans-serif;
      }

      h1 {
        text-align: center;
        color: gold;
        letter-spacing: 6px;
        margin-top: 20px;
        font-size: 44px;
      }

      canvas {
        display: block;
        margin: auto;
      }

      /* ‚ùÑ Tuy·∫øt */
      .snow {
        position: absolute;
        top: -10px;
        color: white;
        animation: fall linear infinite;
      }

      @keyframes fall {
        to {
          transform: translateY(110vh);
        }
      }
    </style>
  </head>

  <body>
    <h1>MERRY CHRISTMAS</h1>
    <canvas id="tree"></canvas>

    <script>
      /* ===== CANVAS ===== */
      const canvas = document.getElementById("tree");
      const ctx = canvas.getContext("2d");

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const cx = canvas.width / 2;
      const topY = 160;
      const treeHeight = 520;
      const baseWidth = 480; // üå≤ th√¢n to
      const particles = [];

      const colors = ["#ffffff", "#ffe066", "#ff9ff3", "#74b9ff"];

      /* ===== V·∫º SAO NH·ªé ===== */
      function drawStarParticle(x, y, r, color, alpha) {
        ctx.save();
        ctx.translate(x, y);
        ctx.globalAlpha = alpha;
        ctx.strokeStyle = color;
        ctx.lineWidth = r * 0.6;
        ctx.shadowBlur = r * 8;
        ctx.shadowColor = color;

        ctx.beginPath();
        ctx.moveTo(-r, 0);
        ctx.lineTo(r, 0);
        ctx.moveTo(0, -r);
        ctx.lineTo(0, r);
        ctx.stroke();

        ctx.restore();
      }

      /* ===== T·∫†O ƒê·ªêM ===== */
      for (let i = 0; i < 2200; i++) {
        const yRatio = Math.random();
        const width = yRatio * baseWidth;

        const isStar = Math.random() < 0.45; // ‚≠ê g·∫ßn n·ª≠a l√† sao
        const size = isStar ? Math.random() * 3 + 2 : Math.random() * 2 + 1;

        particles.push({
          x: cx + (Math.random() * width - width / 2),
          y: topY + yRatio * treeHeight,
          r: size,
          star: isStar,
          color: colors[Math.floor(Math.random() * colors.length)],
          alpha: Math.random() * 0.6 + 0.2,
          speed: Math.random() * 0.01 + 0.003,
        });
      }

      /* ‚≠ê SAO ƒê·ªàNH C√ÇY */
      function drawTopStar() {
        ctx.save();
        ctx.translate(cx, topY - 30);
        ctx.fillStyle = "gold";
        ctx.shadowBlur = 50;
        ctx.shadowColor = "gold";
        ctx.beginPath();
        for (let i = 0; i < 5; i++) {
          ctx.lineTo(
            Math.cos(((18 + i * 72) * Math.PI) / 180) * 22,
            -Math.sin(((18 + i * 72) * Math.PI) / 180) * 22
          );
          ctx.lineTo(
            Math.cos(((54 + i * 72) * Math.PI) / 180) * 9,
            -Math.sin(((54 + i * 72) * Math.PI) / 180) * 9
          );
        }
        ctx.closePath();
        ctx.fill();
        ctx.restore();
      }

      /* üéÑ ANIMATION */
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawTopStar();

        particles.forEach((p) => {
          p.alpha += p.speed;
          if (p.alpha > 1 || p.alpha < 0.15) p.speed *= -1;

          if (p.star) {
            drawStarParticle(p.x, p.y, p.r, p.color, p.alpha);
          } else {
            ctx.beginPath();
            ctx.globalAlpha = p.alpha;
            ctx.fillStyle = p.color;
            ctx.shadowBlur = p.r * 6;
            ctx.shadowColor = p.color;
            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
            ctx.fill();
          }
        });

        ctx.globalAlpha = 1;
        requestAnimationFrame(animate);
      }

      animate();

      /* ‚ùÑ TUY·∫æT */
      for (let i = 0; i < 50; i++) {
        const snow = document.createElement("div");
        snow.className = "snow";
        snow.innerHTML = "‚ùÑ";
        snow.style.left = Math.random() * 100 + "vw";
        snow.style.fontSize = Math.random() * 10 + 10 + "px";
        snow.style.animationDuration = Math.random() * 3 + 2 + "s";
        document.body.appendChild(snow);
      }

      window.onresize = () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      };
    </script>
  </body>
</html>
